#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int block(int p) {
	switch(p) {
		case 0: return(48);
		case 1: return(49);
		case 2: return(32);
		default: printf("error transformation \n");
			exit(1);
	}
}

void affiche(int *tab, int TAILLE) {
	for(int j = 0; j < TAILLE; j++) {
		printf("%c ",block(tab[j]));
	}
	printf("\n\n");
}

void remplir(int *tab, int TAILLE) {
	int random;
	// on remplit le tableau que de 1 = boule rouge
	for(int i = 0; i < TAILLE; i++) {
		tab[i] = 1;
	}
	// on place aléatoirement les trois 0 = boule noire
	for(int j = 0; j < 3; j++) {
		random = rand() % TAILLE;
		if(tab[random] == 1) {
			tab[random] = 0;
		}
		else {
			while(tab[random] == 0) {
				random = rand() % TAILLE;
			}
			tab[random] = 0;
		}
	}
}

int pioche(int *tab, int TAILLE) {
	int random;
	int final;
	random = rand() % TAILLE;
	while(tab[random] == 2) {
		random = rand() % TAILLE;
	}
	final = tab[random];
	tab[random] = 2;
	return final;	
}

float fact(int n) {
	int res = 1;
	for(int i = 1; i <= n; i++) {
		res = res * i;
	}
	return res;
}

void taille(int* TAILLE) {
		do {
		printf("saisir la taille du tableau > 3 \n");
		scanf("%d", TAILLE);
	} while(*TAILLE < 4);
	printf("vous avez un tableau contenant %d boules\n\n", *TAILLE);
}

int ville(int count) {
	switch(count) {
		case 0:
			printf("votre ville d'arrivée est Nantes\n");
			return 1;
		case 1:
			printf("votre ville d'arrivée est Lyon\n");
			return 0;
		case 2:
			printf("votre ville d'arrivée est Biarritz\n");
			return 3;
		case 3:
			printf("votre ville d'arrivée est Monaco\n");
			return 2;
		default: printf("erreur \n");
			exit;
	}
}

int main() {
	int* tab;
	int TAILLE;
	int draw[2];
	int count = 0;
	int game;
	int choix_ville;
	srand(time(NULL));
	taille(&TAILLE);
	tab = malloc(sizeof(int) * TAILLE);
	remplir(tab, TAILLE);
	affiche(tab, TAILLE);
	for(game = 0; game < 3; game++) {
		draw[game] = pioche(tab, TAILLE);
		printf("pioche n° %d = %d\n",game+1, draw[game]);
		if(draw[game] == 0) {
			count++;
		}
	}
	printf("\nvous avez %d boules rouges et %d boules noires\n", 3-count, count);
	choix_ville = ville(count);
	return 0;
}
